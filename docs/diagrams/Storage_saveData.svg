<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="865px" preserveAspectRatio="none" style="width:1083px;height:865px;background:#FFFFFF;" version="1.1" viewBox="0 0 1083 865" width="1083px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="767.397" style="stroke:#A80036;stroke-width:1.0;" width="10" x="126" y="72.8745"/><rect fill="#FFFFFF" height="31.7544" style="stroke:#A80036;stroke-width:1.0;" width="10" x="284" y="104.6289"/><rect fill="#FFFFFF" height="14" style="stroke:#A80036;stroke-width:1.0;" width="10" x="581" y="780.5171"/><rect fill="#FFFFFF" height="51.8745" style="stroke:#A80036;stroke-width:1.0;" width="10" x="750.5" y="304.8125"/><rect fill="#FFFFFF" height="77.5088" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1032.5" y="748.7627"/><rect fill="#FFFFFF" height="522.5049" style="stroke:#000000;stroke-width:2.0;" width="971" x="57" y="151.3833"/><rect fill="#FFFFFF" height="457.9731" style="stroke:none;stroke-width:1.0;" width="971" x="57" y="215.915"/><rect fill="#FFFFFF" height="397.853" style="stroke:#000000;stroke-width:2.0;" width="951" x="67" y="269.0352"/><rect fill="#FFFFFF" height="224.6924" style="stroke:#000000;stroke-width:2.0;" width="931" x="77" y="403.4414"/><rect fill="#FFFFFF" height="51.5317" style="stroke:#000000;stroke-width:2.0;" width="911" x="87" y="537.8477"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="46" x2="46" y1="39.1201" y2="858.2715"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="131" x2="131" y1="39.1201" y2="858.2715"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="289" x2="289" y1="39.1201" y2="858.2715"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="426" x2="426" y1="39.1201" y2="858.2715"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="586" x2="586" y1="249.9751" y2="858.2715"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="755" x2="755" y1="320.8726" y2="858.2715"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="914" x2="914" y1="455.2788" y2="858.2715"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1037" x2="1037" y1="712.9482" y2="858.2715"/><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="82" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68" x="12" y="28.0439">CliverShelf</text><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="68" x="97" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="104" y="28.0439">:Storage</text><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="124" x="227" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="234" y="28.0439">shelfList:ShelfList</text><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="131" x="361" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="368" y="28.0439">currentShelf: Shelf</text><rect fill="#FFFFFF" height="767.397" style="stroke:#A80036;stroke-width:1.0;" width="10" x="126" y="72.8745"/><rect fill="#FFFFFF" height="31.7544" style="stroke:#A80036;stroke-width:1.0;" width="10" x="284" y="104.6289"/><rect fill="#FFFFFF" height="14" style="stroke:#A80036;stroke-width:1.0;" width="10" x="581" y="780.5171"/><rect fill="#FFFFFF" height="51.8745" style="stroke:#A80036;stroke-width:1.0;" width="10" x="750.5" y="304.8125"/><rect fill="#FFFFFF" height="77.5088" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1032.5" y="748.7627"/><polygon fill="#A80036" points="114,68.8745,124,72.8745,114,76.8745" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="46" x2="120" y1="72.8745" y2="72.8745"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="61" x="53" y="68.0181">saveData()</text><polygon fill="#A80036" points="272,100.6289,282,104.6289,272,108.6289" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="136" x2="278" y1="104.6289" y2="104.6289"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="143" y="99.7725">getAllShelvesName()</text><polygon fill="#A80036" points="147,132.3833,137,136.3833,147,140.3833" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="141" x2="288" y1="136.3833" y2="136.3833"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105" x="153" y="131.5269">nameOfAllShelves</text><path d="M57,151.3833 L118,151.3833 L118,160.3833 L108,170.3833 L57,170.3833 L57,151.3833 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="522.5049" style="stroke:#000000;stroke-width:2.0;" width="971" x="57" y="151.3833"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="72" y="167.2813">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="160" x="133" y="165.9893">[nameOfAllShelves.isBlank()]</text><line style="stroke:#A80036;stroke-width:1.0;" x1="136" x2="178" y1="194.915" y2="194.915"/><line style="stroke:#A80036;stroke-width:1.0;" x1="178" x2="178" y1="194.915" y2="207.915"/><line style="stroke:#A80036;stroke-width:1.0;" x1="137" x2="178" y1="207.915" y2="207.915"/><polygon fill="#A80036" points="147,203.915,137,207.915,147,211.915" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="143" y="190.0586">generate sample data</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="57" x2="1028" y1="216.915" y2="216.915"/><polygon fill="#A80036" points="490,219.915,500,223.915,490,227.915" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="136" x2="496" y1="223.915" y2="223.915"/><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="168" x="502" y="217.915"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154" x="509" y="240.959">storedData: JSONObject</text><path d="M67,269.0352 L140,269.0352 L140,278.0352 L130,288.0352 L67,288.0352 L67,269.0352 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="397.853" style="stroke:#000000;stroke-width:2.0;" width="951" x="67" y="269.0352"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="82" y="284.9331">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="244" x="155" y="283.6411">[for each nameOfShelf in nameOfAllShelves]</text><polygon fill="#A80036" points="668,290.8125,678,294.8125,668,298.8125" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="136" x2="674" y1="294.8125" y2="294.8125"/><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="151" x="680" y="288.8125"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137" x="687" y="311.8564">shelfInfo: JSONObject</text><polygon fill="#A80036" points="147,352.687,137,356.687,147,360.687" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="141" x2="754.5" y1="356.687" y2="356.687"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="47" x="153" y="351.8306">shelfInfo</text><polygon fill="#A80036" points="277,384.4414,287,388.4414,277,392.4414" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="136" x2="283" y1="388.4414" y2="388.4414"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="143" y="383.585">getShelf(nameOfShelf)</text><path d="M77,403.4414 L150,403.4414 L150,412.4414 L140,422.4414 L77,422.4414 L77,403.4414 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="224.6924" style="stroke:#000000;stroke-width:2.0;" width="931" x="77" y="403.4414"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="92" y="419.3394">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="197" x="165" y="418.0474">[for each itemName in currentShelf]</text><polygon fill="#A80036" points="829,425.2188,839,429.2188,829,433.2188" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="136" x2="835" y1="429.2188" y2="429.2188"/><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="147" x="841" y="423.2188"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="133" x="848" y="446.2627">itemInfo: JSONObject</text><polygon fill="#A80036" points="414.5,487.0933,424.5,491.0933,414.5,495.0933" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="136" x2="420.5" y1="491.0933" y2="491.0933"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110" x="143" y="486.2368">getItem(itemName)</text><polygon fill="#A80036" points="902.5,518.8477,912.5,522.8477,902.5,526.8477" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="136" x2="908.5" y1="522.8477" y2="522.8477"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="143" y="517.9912">put name, cost, price and remark</text><path d="M87,537.8477 L152,537.8477 L152,546.8477 L142,556.8477 L87,556.8477 L87,537.8477 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="51.5317" style="stroke:#000000;stroke-width:2.0;" width="911" x="87" y="537.8477"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="102" y="553.7456">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="98" x="167" y="552.4536">[item is SoldItem]</text><polygon fill="#A80036" points="902.5,577.3794,912.5,581.3794,902.5,585.3794" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="136" x2="908.5" y1="581.3794" y2="581.3794"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="143" y="576.5229">put saleTime</text><polygon fill="#A80036" points="743.5,616.1338,753.5,620.1338,743.5,624.1338" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="136" x2="749.5" y1="620.1338" y2="620.1338"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210" x="143" y="615.2773">get("items").put(itemName, itemInfo)</text><line style="stroke:#A80036;stroke-width:2.0;" x1="905.5" x2="923.5" y1="611.1338" y2="629.1338"/><line style="stroke:#A80036;stroke-width:2.0;" x1="905.5" x2="923.5" y1="629.1338" y2="611.1338"/><polygon fill="#A80036" points="574,654.8882,584,658.8882,574,662.8882" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="136" x2="580" y1="658.8882" y2="658.8882"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="155" x="143" y="654.0317">put(nameOfShelf, shelfInfo)</text><line style="stroke:#A80036;stroke-width:2.0;" x1="746.5" x2="764.5" y1="649.8882" y2="667.8882"/><line style="stroke:#A80036;stroke-width:2.0;" x1="746.5" x2="764.5" y1="667.8882" y2="649.8882"/><polygon fill="#A80036" points="986,700.6426,996,704.6426,986,708.6426" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="136" x2="992" y1="704.6426" y2="704.6426"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="195" x="143" y="699.7861">new FileWriter(STORAGE_PATH)</text><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="79" x="998" y="680.8882"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="1005" y="703.9321">:FileWriter</text><polygon fill="#A80036" points="1020.5,744.7627,1030.5,748.7627,1020.5,752.7627" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="136" x2="1026.5" y1="748.7627" y2="748.7627"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="143" y="743.9063">write data</text><polygon fill="#A80036" points="602,776.5171,592,780.5171,602,784.5171" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="596" x2="1031.5" y1="780.5171" y2="780.5171"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="608" y="775.6606">toString()</text><polygon fill="#A80036" points="1020.5,790.5171,1030.5,794.5171,1020.5,798.5171" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="586" x2="1026.5" y1="794.5171" y2="794.5171"/><polygon fill="#A80036" points="1025.5,822.2715,1035.5,826.2715,1025.5,830.2715" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="136" x2="1031.5" y1="826.2715" y2="826.2715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="39" x="143" y="821.415">close()</text><line style="stroke:#A80036;stroke-width:2.0;" x1="1028.5" x2="1046.5" y1="817.2715" y2="835.2715"/><line style="stroke:#A80036;stroke-width:2.0;" x1="1028.5" x2="1046.5" y1="835.2715" y2="817.2715"/><polygon fill="#A80036" points="57,836.2715,47,840.2715,57,844.2715" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="51" x2="130" y1="840.2715" y2="840.2715"/><line style="stroke:#A80036;stroke-width:2.0;" x1="577" x2="595" y1="831.2715" y2="849.2715"/><line style="stroke:#A80036;stroke-width:2.0;" x1="577" x2="595" y1="849.2715" y2="831.2715"/><!--MD5=[9560c189ecc1e44d7b0fad9cdeb9b5fb]
@startuml
!include Style.puml
participant CliverShelf as app
participant ":Storage" as storage
participant "shelfList:ShelfList" as shelfList
participant "currentShelf: Shelf" as currentShelf
participant "storedData: JSONObject" as storedData
participant "shelfInfo: JSONObject" as shelfInfo
participant "itemInfo: JSONObject" as itemInfo
participant ":FileWriter" as FileWriter

app -> storage:saveData()
activate storage
storage -> shelfList:getAllShelvesName()
activate shelfList
shelfList - -> storage: nameOfAllShelves
deactivate shelfList
alt nameOfAllShelves.isBlank()

    storage -> storage: generate sample data

else

    storage -> storedData **
    loop for each nameOfShelf in nameOfAllShelves

        storage -> shelfInfo **
        activate shelfInfo
        shelfInfo - -> storage: shelfInfo
        deactivate shelfInfo
        storage -> shelfList:getShelf(nameOfShelf)
        loop for each itemName in currentShelf

            storage -> itemInfo **
            storage -> currentShelf: getItem(itemName)
            storage -> itemInfo: put name, cost, price and remark

            opt item is SoldItem
                storage -> itemInfo: put saleTime
                end

            storage -> shelfInfo: get("items").put(itemName, itemInfo)
            destroy itemInfo
            end
        storage -> storedData: put(nameOfShelf, shelfInfo)
        destroy shelfInfo
        end

    end
storage -> FileWriter **: new FileWriter(STORAGE_PATH)
storage -> FileWriter: write data
activate FileWriter
FileWriter -> storedData: toString()
activate storedData
storedData - -> FileWriter
deactivate storedData
storage -> FileWriter !! : close()
storage - -> app
deactivate storage
destroy storedData
@enduml

@startuml
skinparam style strictuml
skinparam backgroundColor white
skinparam box white
skinparam classAttributeIconSize 0
participant CliverShelf as app
participant ":Storage" as storage
participant "shelfList:ShelfList" as shelfList
participant "currentShelf: Shelf" as currentShelf
participant "storedData: JSONObject" as storedData
participant "shelfInfo: JSONObject" as shelfInfo
participant "itemInfo: JSONObject" as itemInfo
participant ":FileWriter" as FileWriter

app -> storage:saveData()
activate storage
storage -> shelfList:getAllShelvesName()
activate shelfList
shelfList - -> storage: nameOfAllShelves
deactivate shelfList
alt nameOfAllShelves.isBlank()

    storage -> storage: generate sample data

else

    storage -> storedData **
    loop for each nameOfShelf in nameOfAllShelves

        storage -> shelfInfo **
        activate shelfInfo
        shelfInfo - -> storage: shelfInfo
        deactivate shelfInfo
        storage -> shelfList:getShelf(nameOfShelf)
        loop for each itemName in currentShelf

            storage -> itemInfo **
            storage -> currentShelf: getItem(itemName)
            storage -> itemInfo: put name, cost, price and remark

            opt item is SoldItem
                storage -> itemInfo: put saleTime
                end

            storage -> shelfInfo: get("items").put(itemName, itemInfo)
            destroy itemInfo
            end
        storage -> storedData: put(nameOfShelf, shelfInfo)
        destroy shelfInfo
        end

    end
storage -> FileWriter **: new FileWriter(STORAGE_PATH)
storage -> FileWriter: write data
activate FileWriter
FileWriter -> storedData: toString()
activate storedData
storedData - -> FileWriter
deactivate storedData
storage -> FileWriter !! : close()
storage - -> app
deactivate storage
destroy storedData
@enduml

PlantUML version 1.2021.11(Sat Oct 02 21:26:11 CST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>