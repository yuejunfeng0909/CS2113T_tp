<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1072px" preserveAspectRatio="none" style="width:1298px;height:1072px;background:#FFFFFF;" version="1.1" viewBox="0 0 1298 1072" width="1298px" zoomAndPan="magnify"><defs/><g><rect fill="#FFFFFF" height="974.1689" style="stroke:#A80036;stroke-width:1.0;" width="10" x="130" y="72.8745"/><rect fill="#FFFFFF" height="529.7505" style="stroke:#A80036;stroke-width:1.0;" width="10" x="135" y="496.293"/><rect fill="#FFFFFF" height="166.3833" style="stroke:#A80036;stroke-width:1.0;" width="10" x="306" y="175.5264"/><rect fill="#FFFFFF" height="31.7544" style="stroke:#A80036;stroke-width:1.0;" width="10" x="306" y="380.6641"/><rect fill="#FFFFFF" height="31.7544" style="stroke:#A80036;stroke-width:1.0;" width="10" x="586.5" y="667.4536"/><rect fill="#FFFFFF" height="75.8745" style="stroke:#A80036;stroke-width:1.0;" width="10" x="740.5" y="559.8247"/><rect fill="#FFFFFF" height="51.8745" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1013" y="808.5171"/><rect fill="#FFFFFF" height="51.8745" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1170" y="901.4146"/><rect fill="#FFFFFF" height="217.915" style="stroke:#000000;stroke-width:2.0;" width="418.5" x="91" y="131.9946"/><rect fill="#FFFFFF" height="490.7505" style="stroke:#000000;stroke-width:2.0;" width="1221.5" x="71" y="516.293"/><rect fill="#FFFFFF" height="285.8354" style="stroke:#000000;stroke-width:2.0;" width="1201.5" x="81" y="714.208"/><rect fill="#FFFFFF" height="188.5493" style="stroke:#000000;stroke-width:2.0;" width="1181.5" x="91" y="772.7397"/><rect fill="#FFFFFF" height="92.8975" style="stroke:none;stroke-width:1.0;" width="1181.5" x="91" y="868.3916"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="48" x2="48" y1="39.1201" y2="1065.0435"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="135" x2="135" y1="39.1201" y2="1065.0435"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="310.5" x2="310.5" y1="112.9346" y2="1065.0435"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="459.5" x2="459.5" y1="215.5864" y2="1065.0435"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="591.5" x2="591.5" y1="452.4785" y2="1065.0435"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="745.5" x2="745.5" y1="39.1201" y2="1065.0435"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="882.5" x2="882.5" y1="599.8848" y2="1065.0435"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1017.5" x2="1017.5" y1="824.5771" y2="1065.0435"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:5.0,5.0;" x1="1174.5" x2="1174.5" y1="917.4746" y2="1065.0435"/><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="86" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="72" x="12" y="28.0439">:CliverShelf</text><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="68" x="101" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="54" x="108" y="28.0439">:Storage</text><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="124" x="683.5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="690.5" y="28.0439">shelfList:ShelfList</text><rect fill="#FFFFFF" height="974.1689" style="stroke:#A80036;stroke-width:1.0;" width="10" x="130" y="72.8745"/><rect fill="#FFFFFF" height="529.7505" style="stroke:#A80036;stroke-width:1.0;" width="10" x="135" y="496.293"/><rect fill="#FFFFFF" height="166.3833" style="stroke:#A80036;stroke-width:1.0;" width="10" x="306" y="175.5264"/><rect fill="#FFFFFF" height="31.7544" style="stroke:#A80036;stroke-width:1.0;" width="10" x="306" y="380.6641"/><rect fill="#FFFFFF" height="31.7544" style="stroke:#A80036;stroke-width:1.0;" width="10" x="586.5" y="667.4536"/><rect fill="#FFFFFF" height="75.8745" style="stroke:#A80036;stroke-width:1.0;" width="10" x="740.5" y="559.8247"/><rect fill="#FFFFFF" height="51.8745" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1013" y="808.5171"/><rect fill="#FFFFFF" height="51.8745" style="stroke:#A80036;stroke-width:1.0;" width="10" x="1170" y="901.4146"/><polygon fill="#A80036" points="118,68.8745,128,72.8745,118,76.8745" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="48" x2="124" y1="72.8745" y2="72.8745"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="59" x="55" y="68.0181">loadData()</text><polygon fill="#A80036" points="269.5,82.8745,279.5,86.8745,269.5,90.8745" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="140" x2="275.5" y1="86.8745" y2="86.8745"/><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="59" x="281.5" y="80.8745"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="45" x="288.5" y="103.9185">file:File</text><path d="M91,131.9946 L156,131.9946 L156,140.9946 L146,150.9946 L91,150.9946 L91,131.9946 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="217.915" style="stroke:#000000;stroke-width:2.0;" width="418.5" x="91" y="131.9946"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="20" x="106" y="147.8926">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="76" x="171" y="146.6006">[file not exist]</text><polygon fill="#A80036" points="294,171.5264,304,175.5264,294,179.5264" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="140" x2="300" y1="175.5264" y2="175.5264"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="90" x="147" y="170.6699">createNewFile()</text><polygon fill="#A80036" points="408.5,185.5264,418.5,189.5264,408.5,193.5264" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="316" x2="414.5" y1="189.5264" y2="189.5264"/><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="79" x="420.5" y="183.5264"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="427.5" y="206.5703">:FileWriter</text><line style="stroke:#A80036;stroke-width:1.0;" x1="316" x2="358" y1="251.4009" y2="251.4009"/><line style="stroke:#A80036;stroke-width:1.0;" x1="358" x2="358" y1="251.4009" y2="264.4009"/><line style="stroke:#A80036;stroke-width:1.0;" x1="317" x2="358" y1="264.4009" y2="264.4009"/><polygon fill="#A80036" points="327,260.4009,317,264.4009,327,268.4009" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="323" y="246.5444">generate sample data</text><polygon fill="#A80036" points="448,292.1553,458,296.1553,448,300.1553" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="316" x2="454" y1="296.1553" y2="296.1553"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104" x="323" y="291.2988">write(sampleData)</text><polygon fill="#A80036" points="448,323.9097,458,327.9097,448,331.9097" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="316" x2="454" y1="327.9097" y2="327.9097"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="39" x="323" y="323.0532">close()</text><line style="stroke:#A80036;stroke-width:2.0;" x1="451" x2="469" y1="318.9097" y2="336.9097"/><line style="stroke:#A80036;stroke-width:2.0;" x1="451" x2="469" y1="336.9097" y2="318.9097"/><polygon fill="#A80036" points="151,337.9097,141,341.9097,151,345.9097" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="145" x2="310" y1="341.9097" y2="341.9097"/><polygon fill="#A80036" points="294,376.6641,304,380.6641,294,384.6641" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="140" x2="300" y1="380.6641" y2="380.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="67" x="147" y="375.8076">readString()</text><polygon fill="#A80036" points="151,408.4185,141,412.4185,151,416.4185" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="145" x2="310" y1="412.4185" y2="412.4185"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="157" y="407.562">text</text><polygon fill="#A80036" points="497.5,440.1729,507.5,444.1729,497.5,448.1729" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="140" x2="503.5" y1="444.1729" y2="444.1729"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129" x="147" y="439.3164">new JSONObject(text)</text><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="164" x="509.5" y="420.4185"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="150" x="516.5" y="443.4624">storedData:JSONObject</text><line style="stroke:#A80036;stroke-width:1.0;" x1="140" x2="187" y1="483.293" y2="483.293"/><line style="stroke:#A80036;stroke-width:1.0;" x1="187" x2="187" y1="483.293" y2="496.293"/><line style="stroke:#A80036;stroke-width:1.0;" x1="146" x2="187" y1="496.293" y2="496.293"/><polygon fill="#A80036" points="156,492.293,146,496.293,156,500.293" style="stroke:#A80036;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="152" y="478.4365">loadFromJson(storedData)</text><path d="M71,516.293 L144,516.293 L144,525.293 L134,535.293 L71,535.293 L71,516.293 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="490.7505" style="stroke:#000000;stroke-width:2.0;" width="1221.5" x="71" y="516.293"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="86" y="532.1909">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="226" x="159" y="530.8989">[for all shelfName in storedData.keySet()]</text><polygon fill="#A80036" points="728.5,555.8247,738.5,559.8247,728.5,563.8247" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="145" x2="734.5" y1="559.8247" y2="559.8247"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="152" y="554.9683">addShelf(shelfName)</text><polygon fill="#A80036" points="805.5,569.8247,815.5,573.8247,805.5,577.8247" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="750.5" x2="811.5" y1="573.8247" y2="573.8247"/><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="131" x="817.5" y="567.8247"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117" x="824.5" y="590.8687">currentShelf: Shelf</text><polygon fill="#A80036" points="156,631.6992,146,635.6992,156,639.6992" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="150" x2="744.5" y1="635.6992" y2="635.6992"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="162" y="630.8428">currentShelf</text><polygon fill="#A80036" points="574.5,663.4536,584.5,667.4536,574.5,671.4536" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="145" x2="580.5" y1="667.4536" y2="667.4536"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="356" x="152" y="662.5972">getJSONObject(shelfName).getJSONObject("items").keySet()</text><polygon fill="#A80036" points="156,695.208,146,699.208,156,703.208" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="150" x2="590.5" y1="699.208" y2="699.208"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="66" x="162" y="694.3516">itemNames</text><path d="M81,714.208 L154,714.208 L154,723.208 L144,733.208 L81,733.208 L81,714.208 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="285.8354" style="stroke:#000000;stroke-width:2.0;" width="1201.5" x="81" y="714.208"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="96" y="730.106">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="177" x="169" y="728.814">[for all itemName in itemNames]</text><polygon fill="#A80036" points="579.5,753.7397,589.5,757.7397,579.5,761.7397" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="145" x2="585.5" y1="757.7397" y2="757.7397"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="298" x="152" y="752.8833">get information about the item with name itemName</text><path d="M91,772.7397 L152,772.7397 L152,781.7397 L142,791.7397 L91,791.7397 L91,772.7397 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.0;"/><rect fill="none" height="188.5493" style="stroke:#000000;stroke-width:2.0;" width="1181.5" x="91" y="772.7397"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="106" y="788.6377">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="128" x="167" y="787.3457">[item is not a soldItem]</text><polygon fill="#A80036" points="946.5,794.5171,956.5,798.5171,946.5,802.5171" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="145" x2="952.5" y1="798.5171" y2="798.5171"/><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="119" x="958.5" y="792.5171"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="965.5" y="815.561">currentItem: Item</text><polygon fill="#A80036" points="156,856.3916,146,860.3916,156,864.3916" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="150" x2="1017" y1="860.3916" y2="860.3916"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="162" y="855.5352">item</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="91" x2="1272.5" y1="869.3916" y2="869.3916"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="107" x="96" y="881.9976">[item is a soldItem]</text><polygon fill="#A80036" points="1075.5,887.4146,1085.5,891.4146,1075.5,895.4146" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="145" x2="1081.5" y1="891.4146" y2="891.4146"/><rect fill="#FEFECE" height="33.1201" style="stroke:#A80036;stroke-width:1.5;" width="175" x="1087.5" y="885.4146"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161" x="1094.5" y="908.4585">currentSoldItem: SoldItem</text><polygon fill="#A80036" points="156,949.2891,146,953.2891,156,957.2891" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="150" x2="1174" y1="953.2891" y2="953.2891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="25" x="162" y="948.4326">item</text><polygon fill="#A80036" points="871,988.0435,881,992.0435,871,996.0435" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;" x1="145" x2="877" y1="992.0435" y2="992.0435"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="152" y="987.187">addItem(item)</text><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="145" x2="187" y1="1025.0435" y2="1025.0435"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="187" x2="187" y1="1025.0435" y2="1038.0435"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="140" x2="187" y1="1038.0435" y2="1038.0435"/><polygon fill="#A80036" points="150,1034.0435,140,1038.0435,150,1042.0435" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="59,1043.0435,49,1047.0435,59,1051.0435" style="stroke:#A80036;stroke-width:1.0;"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="53" x2="134" y1="1047.0435" y2="1047.0435"/><line style="stroke:#A80036;stroke-width:2.0;" x1="302" x2="320" y1="1038.0435" y2="1056.0435"/><line style="stroke:#A80036;stroke-width:2.0;" x1="302" x2="320" y1="1056.0435" y2="1038.0435"/><line style="stroke:#A80036;stroke-width:2.0;" x1="582.5" x2="600.5" y1="1038.0435" y2="1056.0435"/><line style="stroke:#A80036;stroke-width:2.0;" x1="582.5" x2="600.5" y1="1056.0435" y2="1038.0435"/><!--MD5=[60a7e6d41efcade21a54c59d51eb0068]
@startuml
!include Style.puml

participant ":CliverShelf" as app
participant ":Storage" as storage
participant "file:File" as file
participant ":FileWriter" as FileWriter
participant "storedData:JSONObject" as storedData
participant "shelfList:ShelfList" as shelfList
participant "currentShelf: Shelf" as currentShelf
participant "currentItem: Item" as currentItem
participant "currentSoldItem: SoldItem" as currentSoldItem

app->storage:loadData()
activate storage
storage -> file**
opt file not exist
    storage -> file:createNewFile()
    activate file
    file -> FileWriter **
    file -> file:generate sample data
    file -> FileWriter: write(sampleData)
    file -> FileWriter !!:close()
    file - -> storage
    deactivate file
    end
storage -> file: readString()
activate file
file - -> storage: text
deactivate file
storage -> storedData**: new JSONObject(text)
storage -> storage:loadFromJson(storedData)
activate storage
loop for all shelfName in storedData.keySet()
    storage -> shelfList:addShelf(shelfName)
    activate shelfList
    shelfList -> currentShelf**
    shelfList - -> storage: currentShelf
    deactivate shelfList
    storage -> storedData: getJSONObject(shelfName).getJSONObject("items").keySet()
    activate storedData
    storedData - -> storage: itemNames
    deactivate storedData
    loop for all itemName in itemNames
        storage -> storedData: get information about the item with name itemName
        alt item is not a soldItem
            storage -> currentItem**
            activate currentItem
            currentItem - -> storage:item
            deactivate currentItem
        else item is a soldItem
            storage -> currentSoldItem**
            activate currentSoldItem
            currentSoldItem - -> storage:item
            deactivate currentSoldItem
        end
        storage -> currentShelf: addItem(item)
        end
    end
storage - -> storage
deactivate
storage - -> app
deactivate
destroy file
destroy storedData
@enduml

@startuml
skinparam style strictuml
skinparam backgroundColor white
skinparam box white
skinparam classAttributeIconSize 0

participant ":CliverShelf" as app
participant ":Storage" as storage
participant "file:File" as file
participant ":FileWriter" as FileWriter
participant "storedData:JSONObject" as storedData
participant "shelfList:ShelfList" as shelfList
participant "currentShelf: Shelf" as currentShelf
participant "currentItem: Item" as currentItem
participant "currentSoldItem: SoldItem" as currentSoldItem

app->storage:loadData()
activate storage
storage -> file**
opt file not exist
    storage -> file:createNewFile()
    activate file
    file -> FileWriter **
    file -> file:generate sample data
    file -> FileWriter: write(sampleData)
    file -> FileWriter !!:close()
    file - -> storage
    deactivate file
    end
storage -> file: readString()
activate file
file - -> storage: text
deactivate file
storage -> storedData**: new JSONObject(text)
storage -> storage:loadFromJson(storedData)
activate storage
loop for all shelfName in storedData.keySet()
    storage -> shelfList:addShelf(shelfName)
    activate shelfList
    shelfList -> currentShelf**
    shelfList - -> storage: currentShelf
    deactivate shelfList
    storage -> storedData: getJSONObject(shelfName).getJSONObject("items").keySet()
    activate storedData
    storedData - -> storage: itemNames
    deactivate storedData
    loop for all itemName in itemNames
        storage -> storedData: get information about the item with name itemName
        alt item is not a soldItem
            storage -> currentItem**
            activate currentItem
            currentItem - -> storage:item
            deactivate currentItem
        else item is a soldItem
            storage -> currentSoldItem**
            activate currentSoldItem
            currentSoldItem - -> storage:item
            deactivate currentSoldItem
        end
        storage -> currentShelf: addItem(item)
        end
    end
storage - -> storage
deactivate
storage - -> app
deactivate
destroy file
destroy storedData
@enduml

PlantUML version 1.2021.11(Sat Oct 02 21:26:11 CST 2021)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: GBK
Language: zh
Country: CN
--></g></svg>